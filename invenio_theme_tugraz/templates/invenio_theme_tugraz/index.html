{#
  Copyright (C) 2020 TUGRAZ
  Copyright (C) 2020 mojib wali.

  invenio-theme-tugraz is free software; you can redistribute it and/or
  modify it under the terms of the MIT License; see LICENSE file for more
  details.
#}

{%- extends config.INVENIO_THEME_TUGRAZ_BASE_TEMPLATE %}

{%- from "invenio_theme_tugraz/macros/authors.html" import authors -%}


{%- block page_body %}

<div class="ui container">

  <div class="ui stackable grid">

    <div class="ten wide column">
      <h2>{{_('Recent uploads')}}</h2>

      {%- for r in records %}
      {%- set creation_date = r._created|from_isodatetime -%}
      {%- set record_url = url_for('invenio_records_ui.recid', pid_value=r['recid']) %}

      <!--btn view-->
      <a href="{{ record_url }}" class="ui right floated button">{{_('View')}}</a>
      <!--TODO:
          something with doi
        -->
      <div class="left floated left aligned column">

        <!--Publication date badge-->
        <span class="ui label teal" title="{{_('Publication date')}}">{{ r.publication_date }}
          {{ (' | ' ~ r.version ~ '') if r.version else ' | Version' }}</span>

        <!--Resource type badge-->
        <span class="ui label grey" title="{{_('Resource type')}}">{{r.resource_type.type}}</span>
        <span class="label record-version">
          <!--TODO: add subtype---></span>

        <!--Access right badge-->
        <span class="ui label green">{{_('Open Access')}}</span>
      </div>

      <h4><a href="{{ record_url }}">{{r.titles[0].title}}</a></h4>
      <p>{{ authors(r.creators) }}</p>

      <p class="hidden-xs"><a href="{{record_url}}">{{ r.descriptions[0].description|striptags|truncate(300) }}</a></p>

      <div class="ui tiny header">{% trans user=userprofile, date=creation_date|dateformat('long') %}Uploaded on
        {{date}}{% endtrans %}</div>

      {%- if not loop.last %}
      <div class="ui divider"></div>
      {%- else%}
      <a href="{{url_for('invenio_search_ui.search')}}" class="ui right floated button">{{_('More')}}</a>
      {%- endif %}
      {%- endfor %}
    </div>
    <!--- END Recent uploads-->

    <!---contact form-->
    <div class="six wide column">

      <!--contact us-->
      <div class="ui segment" style="padding-bottom: 10px;">
        <h4>Need help?</h4>
        <div style="padding-bottom: 10px;">
          <a href="{{ url_for('invenio_theme_tugraz.index')}}" class="fluid ui button">Contact us</a>
        </div>
        <p>{{config.THEME_SITENAME}} prioritizes all requested related to the COVID-19 outbreak.</p>
        <p>We can help with:</p>

        <ul>
          <li>Uploading your research data, software, preprints, etc.</li>
          <li>One-on-one with {{config.THEME_SITENAME}} supporters.</li>
          <li>Quota increases beyond our default policy.</li>
          <li>Scripts for automated uploading of larger datasets.</li>
        </ul>

      </div>

      <div class="ui segment" style="padding-bottom: 10px;">
        <h4>Why use {{config.THEME_SITENAME}}?</h4>
        <ul>
          <li><strong>Safe</strong> — your research is stored safely for the future in CERN’s Data Centre for as long as
            CERN exists.</li>
          <li><strong>Trusted</strong> — built and operated by CERN and OpenAIRE to ensure that everyone can join in
            Open Science.</li>
          <li><strong>Citeable</strong> — every upload is assigned a Digital Object Identifier (DOI), to make them
            citable and trackable.</li>
          <li><strong>No waiting time</strong> — Uploads are made available online as soon as you hit publish, and your
            DOI is registered within seconds.</li>
          <li><strong>Open or closed</strong> — Share e.g. anonymized clinical trial data with only medical
            professionals via our restricted access mode.</li>
          <li><strong>Versioning</strong> — Easily update your dataset with our versioning feature.</li>
          <li><strong>Usage statisics</strong> — All uploads display standards compliant usage statistics</li>
        </ul>
      </div>


    </div>
  </div>

</div>
</div>

{%- endblock %}